/**
 * @preserve
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 *
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
!function(t,e){function i(e){t.extend(!0,ve,e)}function n(i,n,c){function h(t){J?(k(),C(),I(),b(t)):u()}function u(){Z=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL&&i.addClass("fc-rtl"),n.theme&&i.addClass("ui-widget"),J=t("<div class='fc-content' style='position:relative'/>").prependTo(i),K=new s(Q,n),G=K.render(),G&&i.prepend(G),y(n.defaultView),t(window).resize(T),v()||f()}function f(){setTimeout(function(){!te.start&&v()&&b()},0)}function p(){t(window).unbind("resize",T),K.destroy(),J.remove(),i.removeClass("fc fc-rtl ui-widget")}function m(){return 0!==ae.offsetWidth}function v(){return 0!==t("body")[0].offsetWidth}function y(e){if(!te||e!=te.name){he++,F();var i,n=te;n?((n.beforeHide||j)(),W(J,J.height()),n.element.hide()):W(J,1),J.css("overflow","hidden"),te=le[e],te?te.element.show():te=le[e]=new _e[e](i=ne=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(J),Q),n&&K.deactivateButton(n.name),K.activateButton(e),b(),J.css("overflow",""),n&&W(J,1),i||(te.afterShow||j)(),he--}}function b(t){if(m()){he++,F(),ie===e&&k();var n=!1;!te.start||t||ue<te.start||ue>=te.end?(te.render(ue,t||0),S(!0),n=!0):te.sizeDirty?(te.clearEvents(),S(),n=!0):te.eventsDirty&&(te.clearEvents(),n=!0),te.sizeDirty=!1,te.eventsDirty=!1,D(n),ee=i.outerWidth(),K.updateTitle(te.title);var s=new Date;s>=te.start&&s<te.end?K.disableButton("today"):K.enableButton("today"),he--,te.trigger("viewDisplay",ae)}}function x(){C(),m()&&(k(),S(),F(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function C(){t.each(le,function(t,e){e.sizeDirty=!0})}function k(){ie=n.contentHeight?n.contentHeight:n.height?n.height-(G?G.height():0)-z(J):Math.round(J.width()/Math.max(n.aspectRatio,.5))}function S(t){he++,te.setHeight(ie,t),ne&&(ne.css("position","relative"),ne=null),te.setWidth(J.width(),t),he--}function T(){if(!he)if(te.start){var t=++ce;setTimeout(function(){t==ce&&!he&&m()&&ee!=(ee=i.outerWidth())&&(he++,x(),te.trigger("windowResize",ae),he--)},200)}else f()}function D(t){!n.lazyFetching||oe(te.visStart,te.visEnd)?M():t&&P()}function M(){re(te.visStart,te.visEnd)}function E(t){de=t,P()}function A(t){P(t)}function P(t){I(),m()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function I(){t.each(le,function(t,e){e.eventsDirty=!0})}function N(t,i,n){te.select(t,i,n===e?!0:n)}function F(){te&&te.unselect()}function H(){b(-1)}function $(){b(1)}function O(){r(ue,-1),b()}function L(){r(ue,1),b()}function R(){ue=new Date,b()}function B(t,e,i){t instanceof Date?ue=d(t):g(ue,t,e,i),b()}function q(t,i,n){t!==e&&r(ue,t),i!==e&&a(ue,i),n!==e&&l(ue,n),b()}function U(){return d(ue)}function V(){return te}function Y(t,i){return i===e?n[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(n[t]=i,x()),void 0)}function X(t,e){return n[t]?n[t].apply(e||ae,Array.prototype.slice.call(arguments,2)):void 0}var Q=this;Q.options=n,Q.render=h,Q.destroy=p,Q.refetchEvents=M,Q.reportEvents=E,Q.reportEventChange=A,Q.rerenderEvents=P,Q.changeView=y,Q.select=N,Q.unselect=F,Q.prev=H,Q.next=$,Q.prevYear=O,Q.nextYear=L,Q.today=R,Q.gotoDate=B,Q.incrementDate=q,Q.formatDate=function(t,e){return _(t,e,n)},Q.formatDates=function(t,e,i){return w(t,e,i,n)},Q.getDate=U,Q.getView=V,Q.option=Y,Q.trigger=X,o.call(Q,n,c);var K,G,J,Z,te,ee,ie,ne,se,oe=Q.isFetchNeeded,re=Q.fetchEvents,ae=i[0],le={},ce=0,he=0,ue=new Date,de=[];g(ue,n.year,n.month,n.date),n.droppable&&t(document).bind("dragstart",function(e,i){var s=e.target,o=t(s);if(!o.parents(".fc").length){var r=n.dropAccept;(t.isFunction(r)?r.call(s,o):o.is(r))&&(se=s,te.dragStart(se,e,i))}}).bind("dragstop",function(t,e){se&&(te.dragStop(se,t,e),se=null)})}function s(e,i){function n(){d=i.theme?"ui":"fc";var e=i.header;return e?f=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(o("left")).append(o("center")).append(o("right"))):void 0}function s(){f.remove()}function o(n){var s=t("<td class='fc-header-"+n+"'/>"),o=i.header[n];return o&&t.each(o.split(" "),function(n){n>0&&s.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(n,r){if("title"==r)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(d+"-corner-right"),o=null;else{var a;if(e[r]?a=e[r]:_e[r]&&(a=function(){h.removeClass(d+"-state-hover"),e.changeView(r)}),a){var l=i.theme?q(i.buttonIcons,r):null,c=q(i.buttonText,r),h=t("<span class='fc-button fc-button-"+r+" "+d+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");h&&(h.click(function(){h.hasClass(d+"-state-disabled")||a()}).mousedown(function(){h.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){h.removeClass(d+"-state-down")}).hover(function(){h.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){h.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(s),o||h.addClass(d+"-corner-left"),o=h)}}}),o&&o.addClass(d+"-corner-right")}),s}function r(t){f.find("h2").html(t)}function a(t){f.find("span.fc-button-"+t).addClass(d+"-state-active")}function l(t){f.find("span.fc-button-"+t).removeClass(d+"-state-active")}function c(t){f.find("span.fc-button-"+t).addClass(d+"-state-disabled")}function h(t){f.find("span.fc-button-"+t).removeClass(d+"-state-disabled")}var u=this;u.render=n,u.destroy=s,u.updateTitle=r,u.activateButton=a,u.deactivateButton=l,u.disableButton=c,u.enableButton=h;var d,f=t([])}function o(i,n){function s(t,e){return!k||k>t||e>S}function o(t,e){k=t,S=e,F=[];var i=++P,n=A.length;I=n;for(var s=0;n>s;s++)r(A[s],i)}function r(t,e){a(t,function(i){if(e==P){if(i){for(var n=0;n<i.length;n++)i[n].source=t,b(i[n]);F=F.concat(i)}I--,I||M(F)}})}function a(e,n){var s,o,r=be.sourceFetchers;for(s=0;s<r.length;s++){if(o=r[s](e,k,S,n),o===!0)return;if("object"==typeof o)return a(o,n),void 0}var l=e.events;if(l)t.isFunction(l)?(g(),l(d(k),d(S),function(t){n(t),y()})):t.isArray(l)?n(l):n();else{var c=e.url;if(c){var h=e.success,u=e.error,f=e.complete,p=t.extend({},e.data||{}),m=J(e.startParam,i.startParam),v=J(e.endParam,i.endParam);m&&(p[m]=Math.round(+k/1e3)),v&&(p[v]=Math.round(+S/1e3)),g(),t.ajax(t.extend({},we,e,{data:p,success:function(e){e=e||[];var i=G(h,this,arguments);t.isArray(i)&&(e=i),n(e)},error:function(){G(u,this,arguments),n()},complete:function(){G(f,this,arguments),y()}}))}else n()}}function l(t){t=c(t),t&&(I++,r(t,P))}function c(e){return t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e?(_(e),A.push(e),e):void 0}function h(e){A=t.grep(A,function(t){return!w(t,e)}),F=t.grep(F,function(t){return!w(t.source,e)}),M(F)}function u(t){var e,i,n=F.length,s=D().defaultEventEnd,o=t.start-t._start,r=t.end?t.end-(t._end||s(t)):0;for(e=0;n>e;e++)i=F[e],i._id==t._id&&i!=t&&(i.start=new Date(+i.start+o),i.end=t.end?i.end?new Date(+i.end+r):new Date(+s(i)+r):null,i.title=t.title,i.url=t.url,i.allDay=t.allDay,i.className=t.className,i.editable=t.editable,i.color=t.color,i.backgroudColor=t.backgroudColor,i.borderColor=t.borderColor,i.textColor=t.textColor,b(i));b(t),M(F)}function f(t,e){b(t),t.source||(e&&(E.events.push(t),t.source=E),F.push(t)),M(F)}function p(e){if(e){if(!t.isFunction(e)){var i=e+"";e=function(t){return t._id==i}}F=t.grep(F,e,!0);for(var n=0;n<A.length;n++)t.isArray(A[n].events)&&(A[n].events=t.grep(A[n].events,e,!0))}else{F=[];for(var n=0;n<A.length;n++)t.isArray(A[n].events)&&(A[n].events=[])}M(F)}function m(e){return t.isFunction(e)?t.grep(F,e):e?(e+="",t.grep(F,function(t){return t._id==e})):F}function g(){N++||T("loading",null,!0)}function y(){--N||T("loading",null,!1)}function b(t){var n=t.source||{},s=J(n.ignoreTimezone,i.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+xe++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=v(t.start,s)),t.end=v(t.end,s),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=J(n.allDayDefault,i.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function _(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=be.sourceNormalizers,i=0;i<e.length;i++)e[i](t)}function w(t,e){return t&&e&&x(t)==x(e)}function x(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=s,C.fetchEvents=o,C.addEventSource=l,C.removeEventSource=h,C.updateEvent=u,C.renderEvent=f,C.removeEvents=p,C.clientEvents=m,C.normalizeEvent=b;for(var k,S,T=C.trigger,D=C.getView,M=C.reportEvents,E={events:[]},A=[E],P=0,I=0,N=0,F=[],z=0;z<n.length;z++)c(n[z])}function r(t,e,i){return t.setFullYear(t.getFullYear()+e),i||u(t),t}function a(t,e,i){if(+t){var n=t.getMonth()+e,s=d(t);for(s.setDate(1),s.setMonth(n),t.setMonth(n),i||u(t);t.getMonth()!=s.getMonth();)t.setDate(t.getDate()+(s>t?1:-1))}return t}function l(t,e,i){if(+t){var n=t.getDate()+e,s=d(t);s.setHours(9),s.setDate(n),t.setDate(n),i||u(t),c(t,s)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Se)}function h(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function f(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function p(t,e,i){for(e=e||1;!t.getDay()||i&&1==t.getDay()||!i&&6==t.getDay();)l(t,e);return t}function m(t,e){return Math.round((d(t,!0)-d(e,!0))/ke)}function g(t,i,n,s){i!==e&&i!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(i)),n!==e&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),s!==e&&t.setDate(s)}function v(t,i){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(i===e&&(i=!0),y(t,i)||(t?new Date(t):null)):null}function y(t,e){var i=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(e||!i[13]){var s=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),s.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),s.setDate(i[5])),c(n,s),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,s)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var o=60*Number(i[16])+(i[18]?Number(i[18]):0);o*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*o)}return n}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var i=parseInt(e[1],10);return e[3]&&(i%=12,"p"==e[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(e[2]?parseInt(e[2],10):0)}}function _(t,e,i){return w(t,null,e,i)}function w(t,e,i,n){n=n||ve;var s,o,r,a,l=t,c=e,h=i.length,u="";for(s=0;h>s;s++)if(o=i.charAt(s),"'"==o){for(r=s+1;h>r;r++)if("'"==i.charAt(r)){l&&(u+=r==s+1?"'":i.substring(s+1,r),s=r);break}}else if("("==o){for(r=s+1;h>r;r++)if(")"==i.charAt(r)){var d=_(l,i.substring(s+1,r),n);parseInt(d.replace(/\D/,""),10)&&(u+=d),s=r;break}}else if("["==o){for(r=s+1;h>r;r++)if("]"==i.charAt(r)){var f=i.substring(s+1,r),d=_(l,f,n);d!=_(c,f,n)&&(u+=d),s=r;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(r=h;r>s;r--)if(a=De[i.substring(s,r)]){l&&(u+=a(l,n)),s=r-1;break}r==s&&l&&(u+=o)}return u}function x(t){return t.end?C(t.end,t.allDay):l(d(t.start),1)}function C(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}function k(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function S(t,e){return t.end>e.start&&t.start<e.end}function T(t,e,i,n){var s,o,r,a,l,c,h,u,f=[],p=t.length;for(s=0;p>s;s++)o=t[s],r=o.start,a=e[s],a>i&&n>r&&(i>r?(l=d(i),h=!1):(l=r,h=!0),a>n?(c=d(n),u=!1):(c=a,u=!0),f.push({event:o,start:l,end:c,isStart:h,isEnd:u,msLength:c-l}));return f.sort(k)}function D(t){var e,i,n,s,o,r=[],a=t.length;for(e=0;a>e;e++){for(i=t[e],n=0;;){if(s=!1,r[n])for(o=0;o<r[n].length;o++)if(S(r[n][o],i)){s=!0;break}if(!s)break;n++}r[n]?r[n].push(i):r[n]=[i]}return r}function M(i,n,s){i.unbind("mouseover").mouseover(function(i){for(var o,r,a,l=i.target;l!=this;)o=l,l=l.parentNode;(r=o._fci)!==e&&(o._fci=e,a=n[r],s(a.event,a.element,a),t(i.target).trigger(i)),i.stopPropagation()})}function E(e,i,n){for(var s,o=0;o<e.length;o++)s=t(e[o]),s.width(Math.max(0,i-P(s,n)))}function A(e,i,n){for(var s,o=0;o<e.length;o++)s=t(e[o]),s.height(Math.max(0,i-z(s,n)))}function P(t,e){return I(t)+F(t)+(e?N(t):0)}function I(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function z(t,e){return H(t)+O(t)+(e?$(t):0)}function H(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function $(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function W(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,i){i.style.cssText+=";min-height:"+e+";_height:"+e})}function j(){}function L(t,e){return t-e}function R(t){return Math.max.apply(Math,t)}function B(t){return(10>t?"0":"")+t}function q(t,i){if(t[i]!==e)return t[i];for(var n,s=i.split(/(?=[A-Z])/),o=s.length-1;o>=0;o--)if(n=t[s[o].toLowerCase()],n!==e)return n;return t[""]}function U(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function V(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function Y(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function X(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Q(t,e){t.each(function(t,i){i.className=i.className.replace(/^fc-\w*/,"fc-"+Ce[e.getDay()])})}function K(t,e){var i=t.source||{},n=t.color,s=i.color,o=e("eventColor"),r=t.backgroundColor||n||i.backgroundColor||s||e("eventBackgroundColor")||o,a=t.borderColor||n||i.borderColor||s||e("eventBorderColor")||o,l=t.textColor||i.textColor||e("eventTextColor"),c=[];return r&&c.push("background-color:"+r),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function G(e,i,n){if(t.isFunction(e)&&(e=[e]),e){var s,o;for(s=0;s<e.length;s++)o=e[s].apply(i,n)||o;return o}}function J(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function Z(t,e){function i(t,e){e&&(a(t,e),t.setDate(1));var i=d(t,!0);i.setDate(1);var c=a(d(i),1),h=d(i),u=d(c),f=s("firstDay"),m=s("weekends")?0:1;m&&(p(h),p(u,-1,!0)),l(h,-((h.getDay()-Math.max(f,m)+7)%7)),l(u,(7-u.getDay()+Math.max(f,m))%7);var g=Math.round((u-h)/(7*ke));"fixed"==s("weekMode")&&(l(u,7*(6-g)),g=6),n.title=r(i,s("titleFormat")),n.start=i,n.end=c,n.visStart=h,n.visEnd=u,o(6,g,m?5:7,!0)}var n=this;n.render=i,ie.call(n,t,e,"month");var s=n.opt,o=n.renderBasic,r=e.formatDate}function te(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-s("firstDay")+7)%7)),a=l(d(i),7),c=d(i),h=d(a),u=s("weekends");u||(p(c),p(h,-1,!0)),n.title=r(c,l(d(h),-1),s("titleFormat")),n.start=i,n.end=a,n.visStart=c,n.visEnd=h,o(1,1,u?7:5,!1)}var n=this;n.render=i,ie.call(n,t,e,"basicWeek");var s=n.opt,o=n.renderBasic,r=e.formatDates}function ee(t,e){function i(t,e){e&&(l(t,e),s("weekends")||p(t,0>e?-1:1)),n.title=r(t,s("titleFormat")),n.start=n.visStart=d(t,!0),n.end=n.visEnd=l(d(n.start),1),o(1,1,1,!1)}var n=this;n.render=i,ie.call(n,t,e,"basicDay");var s=n.opt,o=n.renderBasic,r=e.formatDate}function ie(e,i,n){function s(t,e,i,n){J=e,Z=i,o();var s=!j;s?r(t,n):be(),a(s)}function o(){se=ve("isRTL"),se?(oe=-1,re=Z-1):(oe=1,re=0),ae=ve("firstDay"),le=ve("weekends")?0:1,he=ve("theme")?"ui":"fc",me=ve("columnFormat")}function r(i,n){var s,o,r,a,l=he+"-widget-header",c=he+"-widget-content";for(s="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",o=0;Z>o;o++)s+="<th class='fc- "+l+"'/>";for(s+="</tr></thead><tbody>",o=0;i>o;o++){for(s+="<tr class='fc-week"+o+"'>",r=0;Z>r;r++)s+="<td class='fc- "+c+" fc-day"+(o*Z+r)+"'>"+"<div>"+(n?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";s+="</tr>"}s+="</tbody></table>",a=t(s).appendTo(e),$=a.find("thead"),O=$.find("th"),j=a.find("tbody"),L=j.find("tr"),R=j.find("td"),B=R.filter(":first-child"),q=L.eq(0).find("div.fc-day-content div"),X($.add($.find("tr"))),X(L),L.eq(0).addClass("fc-first"),f(R),U=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function a(e){var i,n,s,o=e||1==J,r=H.start.getMonth(),a=u(new Date);o&&O.each(function(e,s){i=t(s),n=P(e),i.html(Ce(n,me)),Q(i,n)}),R.each(function(e,s){i=t(s),n=P(e),n.getMonth()==r?i.removeClass("fc-other-month"):i.addClass("fc-other-month"),+n==+a?i.addClass(he+"-state-highlight fc-today"):i.removeClass(he+"-state-highlight fc-today"),i.find("div.fc-day-number").text(n.getDate()),o&&Q(i,n)}),L.each(function(e,i){s=t(i),J>e?(s.show(),e==J-1?s.addClass("fc-last"):s.removeClass("fc-last")):s.hide()})}function c(e){K=e;var i,n,s,o=K-$.height();"variable"==ve("weekMode")?i=n=Math.floor(o/(1==J?2:6)):(i=Math.floor(o/J),n=o-i*(J-1)),B.each(function(e,o){J>e&&(s=t(o),W(s.find("> div"),(e==J-1?n:i)-z(s)))})}function h(t){V=t,ie.clear(),G=Math.floor(V/Z),E(O.slice(0,-1),G)}function f(t){t.click(p).mousedown(xe)}function p(t){if(!ve("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]),i=P(e);ye("dayClick",this,i,!0,t)}}function g(t,e,i){i&&te.build();for(var n=d(H.visStart),s=l(d(n),Z),o=0;J>o;o++){var r=new Date(Math.max(n,t)),a=new Date(Math.min(s,e));if(a>r){var c,h;se?(c=m(a,n)*oe+re+1,h=m(r,n)*oe+re+1):(c=m(r,n),h=m(a,n)),f(v(o,c,o,h-1))}l(n,7),l(s,7)}}function v(t,i,n,s){var o=te.rect(t,i,n,s,e);return _e(o,e)}function y(t){return d(t)}function b(t,e){g(t,l(d(e),1),!0)}function _(){we()}function w(t,e,i){var n=D(t),s=R[n.row*Z+n.col];ye("dayClick",s,t,e,i)}function x(t,e){ee.start(function(t){we(),t&&v(t.row,t.col,t.row,t.col)},e)}function C(t,e,i){var n=ee.stop();if(we(),n){var s=M(n);ye("drop",t,s,!0,e,i)}}function k(t){return d(t.start)}function S(t){return ie.left(t)}function T(t){return ie.right(t)}function D(t){return{row:Math.floor(m(t,H.visStart)/7),col:I(t.getDay())}}function M(t){return A(t.row,t.col)}function A(t,e){return l(d(H.visStart),7*t+e*oe+re)}function P(t){return A(Math.floor(t/Z),t%Z)}function I(t){return(t-Math.max(ae,le)+Z)%Z*oe+re}function N(t){return L.eq(t)}function F(){return{left:0,right:V}}var H=this;H.renderBasic=s,H.setHeight=c,H.setWidth=h,H.renderDayOverlay=g,H.defaultSelectionEnd=y,H.renderSelection=b,H.clearSelection=_,H.reportDayClick=w,H.dragStart=x,H.dragStop=C,H.defaultEventEnd=k,H.getHoverListener=function(){return ee},H.colContentLeft=S,H.colContentRight=T,H.dayOfWeekCol=I,H.dateCell=D,H.cellDate=M,H.cellIsAllDay=function(){return!0},H.allDayRow=N,H.allDayBounds=F,H.getRowCnt=function(){return J},H.getColCnt=function(){return Z},H.getColWidth=function(){return G},H.getDaySegmentContainer=function(){return U},ce.call(H,e,i,n),de.call(H),ue.call(H),ne.call(H);var $,O,j,L,R,B,q,U,V,K,G,J,Z,te,ee,ie,se,oe,re,ae,le,he,me,ve=H.opt,ye=H.trigger,be=H.clearEvents,_e=H.renderOverlay,we=H.clearOverlays,xe=H.daySelectionMousedown,Ce=i.formatDate;Y(e.addClass("fc-grid")),te=new fe(function(e,i){var n,s,o;O.each(function(e,r){n=t(r),s=n.offset().left,e&&(o[1]=s),o=[s],i[e]=o}),o[1]=s+n.outerWidth(),L.each(function(i,r){J>i&&(n=t(r),s=n.offset().top,i&&(o[1]=s),o=[s],e[i]=o)}),o[1]=s+n.outerHeight()}),ee=new pe(te),ie=new ge(function(t){return q.eq(t)})}function ne(){function e(t,e){f(t),M(n(t),e)}function i(){p(),b().empty()}function n(e){var i,n,s,o,a,c,h=k(),u=S(),f=d(r.visStart),p=l(d(f),u),m=t.map(e,x),g=[];for(i=0;h>i;i++){for(n=D(T(e,m,f,p)),s=0;s<n.length;s++)for(o=n[s],a=0;a<o.length;a++)c=o[a],c.row=i,c.level=s,g.push(c);l(f,7),l(p,7)}return g}function s(t,e,i){h(t)&&o(t,e),i.isEnd&&u(t)&&E(t,e,i),m(t,e)}function o(t,e){var i,n=_();e.draggable({zIndex:9,delay:50,opacity:a("dragOpacity"),revertDuration:a("dragRevertDuration"),start:function(s,o){c("eventDragStart",e,t,s,o),v(t,e),n.start(function(n,s,o,r){e.draggable("option","revert",!n||!o&&!r),C(),n?(i=7*o+r*(a("isRTL")?-1:1),w(l(d(t.start),i),l(x(t),i))):i=0},s,"drag")},stop:function(s,o){n.stop(),C(),c("eventDragStop",e,t,s,o),i?y(this,t,i,0,t.allDay,s,o):(e.css("filter",""),g(t,e))}})}var r=this;r.renderEvents=e,r.compileDaySegs=n,r.clearEvents=i,r.bindDaySeg=s,he.call(r);var a=r.opt,c=r.trigger,h=r.isEventDraggable,u=r.isEventResizable,f=r.reportEvents,p=r.reportEventClear,m=r.eventElementHandlers,g=r.showEvents,v=r.hideEvents,y=r.eventDrop,b=r.getDaySegmentContainer,_=r.getHoverListener,w=r.renderDayOverlay,C=r.clearOverlays,k=r.getRowCnt,S=r.getColCnt,M=r.renderDaySegs,E=r.resizableDayEvent}function se(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-s("firstDay")+7)%7)),a=l(d(i),7),c=d(i),h=d(a),u=s("weekends");u||(p(c),p(h,-1,!0)),n.title=r(c,l(d(h),-1),s("titleFormat")),n.start=i,n.end=a,n.visStart=c,n.visEnd=h,o(u?7:5)}var n=this;n.render=i,re.call(n,t,e,"agendaWeek");var s=n.opt,o=n.renderAgenda,r=e.formatDates}function oe(t,e){function i(t,e){e&&(l(t,e),s("weekends")||p(t,0>e?-1:1));var i=d(t,!0),a=l(d(i),1);n.title=r(t,s("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=a,o(1)}var n=this;n.render=i,re.call(n,t,e,"agendaDay");var s=n.opt,o=n.renderAgenda,r=e.formatDate}function re(i,n,s){function o(t){Fe=t,r(),te?Ke():a(),c()}function r(){We=Xe("theme")?"ui":"fc",Le=Xe("weekends")?0:1,je=Xe("firstDay"),(Re=Xe("isRTL"))?(Be=-1,qe=Fe-1):(Be=1,qe=0),Ue=b(Xe("minTime")),Ve=b(Xe("maxTime")),Ye=Xe("columnFormat")}function a(){var e,n,s,o,r,a=We+"-widget-header",l=We+"-widget-content",c=0==Xe("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;Fe>n;n++)e+="<th class='fc- fc-col"+n+" "+a+"'/>";for(e+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;Fe>n;n++)e+="<td class='fc- fc-col"+n+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",te=t(e).appendTo(i),ee=te.find("thead"),ie=ee.find("th").slice(1,-1),ne=te.find("tbody"),se=ne.find("td").slice(0,-1),oe=se.find("div.fc-day-content div"),re=se.eq(0),le=re.find("> div"),X(ee.add(ee.find("tr"))),X(ne.add(ne.find("tr"))),ke=ee.find("th:first"),Se=te.find(".fc-agenda-gutter"),he=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Xe("allDaySlot")?(me=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(he),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Xe("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+a+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ve=t(e).appendTo(he),ye=ve.find("tr"),w(ye.find("td")),ke=ke.add(ve.find("th:first")),Se=Se.add(ve.find("th.fc-agenda-gutter")),he.append("<div class='fc-agenda-divider "+a+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):me=t([]),be=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(he),_e=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(be),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(_e),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",s=f(),o=h(d(s),Ve),h(s,Ue),ze=0,n=0;o>s;n++)r=s.getMinutes(),e+="<tr class='fc-slot"+n+" "+(r?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+a+"'>"+(c&&r?"&nbsp;":ni(s,Xe("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",h(s,Xe("slotMinutes")),ze++;e+="</tbody></table>",xe=t(e).appendTo(_e),Ce=xe.find("div:first"),x(xe.find("td")),ke=ke.add(xe.find("th:first"))}function c(){var t,e,i,n,s=u(new Date);for(t=0;Fe>t;t++)n=N(t),e=ie.eq(t),e.html(ni(n,Ye)),i=se.eq(t),+n==+s?i.addClass(We+"-state-highlight fc-today"):i.removeClass(We+"-state-highlight fc-today"),Q(e.add(i),n)}function p(t,i){t===e&&(t=Me),Me=t,si={};var n=ne.position().top,s=be.position().top,o=Math.min(t-n,xe.height()+s+1);le.height(o-z(re)),he.css("top",n),be.height(o-s-1),Ie=Ce.height()+1,i&&v()}function g(e){De=e,Oe.clear(),Ee=0,E(ke.width("").each(function(e,i){Ee=Math.max(Ee,t(i).outerWidth())}),Ee);var i=be[0].clientWidth;Pe=be.width()-i,Pe?(E(Se,Pe),Se.show().prev().removeClass("fc-last")):Se.hide().prev().addClass("fc-last"),Ae=Math.floor((i-Ee)/Fe),E(ie.slice(0,-1),Ae)}function v(){function t(){be.scrollTop(n)}var e=f(),i=d(e);i.setHours(Xe("firstHour"));var n=$(e,i)+1;t(),setTimeout(t,0)}function y(){Ne=be.scrollTop()}function _(){be.scrollTop(Ne)}function w(t){t.click(C).mousedown(ei)}function x(t){t.click(C).mousedown(V)}function C(t){if(!Xe("selectable")){var e=Math.min(Fe-1,Math.floor((t.pageX-te.offset().left-Ee)/Ae)),i=N(e),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var s=parseInt(n[1])*Xe("slotMinutes"),o=Math.floor(s/60);i.setHours(o),i.setMinutes(s%60+Ue),Qe("dayClick",se[e],i,!1,t)}else Qe("dayClick",se[e],i,!0,t)}}function k(t,e,i){i&&He.build();var n,s,o=d(Z.visStart);Re?(n=m(e,o)*Be+qe+1,s=m(t,o)*Be+qe+1):(n=m(t,o),s=m(e,o)),n=Math.max(0,n),s=Math.min(Fe,s),s>n&&w(S(0,n,0,s-1))}function S(t,e,i,n){var s=He.rect(t,e,i,n,he);return Ge(s,he)}function T(t,e){for(var i=d(Z.visStart),n=l(d(i),1),s=0;Fe>s;s++){var o=new Date(Math.max(i,t)),r=new Date(Math.min(n,e));if(r>o){var a=s*Be+qe,c=He.rect(0,a,0,a,_e),h=$(i,o),u=$(i,r);c.top=h,c.height=u-h,x(Ge(c,_e))}l(i,1),l(n,1)}}function D(t){return Oe.left(t)}function M(t){return Oe.right(t)}function P(t){return{row:Math.floor(m(t,Z.visStart)/7),col:H(t.getDay())}}function I(t){var e=N(t.col),i=t.row;return Xe("allDaySlot")&&i--,i>=0&&h(e,Ue+i*Xe("slotMinutes")),e}function N(t){return l(d(Z.visStart),t*Be+qe)}function F(t){return Xe("allDaySlot")&&!t.row}function H(t){return(t-Math.max(je,Le)+Fe)%Fe*Be+qe}function $(t,i){if(t=d(t,!0),i<h(d(t),Ue))return 0;if(i>=h(d(t),Ve))return xe.height();var n=Xe("slotMinutes"),s=60*i.getHours()+i.getMinutes()-Ue,o=Math.floor(s/n),r=si[o];return r===e&&(r=si[o]=xe.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(r-1+Ie*(s%n/n)))}function O(){return{left:Ee,right:De-Pe}}function W(){return ye}function j(t){var e=d(t.start);return t.allDay?e:h(e,Xe("defaultEventMinutes"))}function R(t,e){return e?d(t):h(d(t),Xe("slotMinutes"))}function B(t,e,i){i?Xe("allDaySlot")&&k(t,l(d(e),1),!0):q(t,e)}function q(e,i){var n=Xe("selectHelper");if(He.build(),n){var s=m(e,Z.visStart)*Be+qe;if(s>=0&&Fe>s){var o=He.rect(0,s,0,s,_e),r=$(e,e),a=$(e,i);if(a>r){if(o.top=r,o.height=a-r,o.left+=2,o.width-=5,t.isFunction(n)){var l=n(e,i);l&&(o.position="absolute",o.zIndex=8,Te=t(l).css(o).appendTo(_e))}else o.isStart=!0,o.isEnd=!0,Te=t(ii({title:"",start:e,end:i,className:["fc-select-helper"],editable:!1},o)),Te.css("opacity",Xe("dragOpacity"));Te&&(x(Te),_e.append(Te),E(Te,o.width,!0),A(Te,o.height,!0))}}}else T(e,i)}function U(){Je(),Te&&(Te.remove(),Te=null)}function V(e){if(1==e.which&&Xe("selectable")){ti(e);var i;$e.start(function(t,e){if(U(),t&&t.col==e.col&&!F(t)){var n=I(e),s=I(t);i=[n,h(d(n),Xe("slotMinutes")),s,h(d(s),Xe("slotMinutes"))].sort(L),q(i[0],i[3])}else i=null},e),t(document).one("mouseup",function(t){$e.stop(),i&&(+i[0]==+i[1]&&K(i[0],!1,t),Ze(i[0],i[3],!1,t))})}}function K(t,e,i){Qe("dayClick",se[H(t.getDay())],t,e,i)}function G(t,e){$e.start(function(t){if(Je(),t)if(F(t))S(t.row,t.col,t.row,t.col);else{var e=I(t),i=h(d(e),Xe("defaultEventMinutes"));T(e,i)}},e)}function J(t,e,i){var n=$e.stop();Je(),n&&Qe("drop",t,I(n),F(n),e,i)}var Z=this;Z.renderAgenda=o,Z.setWidth=g,Z.setHeight=p,Z.beforeHide=y,Z.afterShow=_,Z.defaultEventEnd=j,Z.timePosition=$,Z.dayOfWeekCol=H,Z.dateCell=P,Z.cellDate=I,Z.cellIsAllDay=F,Z.allDayRow=W,Z.allDayBounds=O,Z.getHoverListener=function(){return $e},Z.colContentLeft=D,Z.colContentRight=M,Z.getDaySegmentContainer=function(){return me},Z.getSlotSegmentContainer=function(){return we},Z.getMinMinute=function(){return Ue},Z.getMaxMinute=function(){return Ve},Z.getBodyContent=function(){return _e},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Fe},Z.getColWidth=function(){return Ae},Z.getSlotHeight=function(){return Ie},Z.defaultSelectionEnd=R,Z.renderDayOverlay=k,Z.renderSelection=B,Z.clearSelection=U,Z.reportDayClick=K,Z.dragStart=G,Z.dragStop=J,ce.call(Z,i,n,s),de.call(Z),ue.call(Z),ae.call(Z);var te,ee,ie,ne,se,oe,re,le,he,me,ve,ye,be,_e,we,xe,Ce,ke,Se,Te,De,Me,Ee,Ae,Pe,Ie,Ne,Fe,ze,He,$e,Oe,We,je,Le,Re,Be,qe,Ue,Ve,Ye,Xe=Z.opt,Qe=Z.trigger,Ke=Z.clearEvents,Ge=Z.renderOverlay,Je=Z.clearOverlays,Ze=Z.reportSelection,ti=Z.unselect,ei=Z.daySelectionMousedown,ii=Z.slotSegHtml,ni=n.formatDate,si={};Y(i.addClass("fc-agenda")),He=new fe(function(e,i){function n(t){return Math.max(l,Math.min(c,t))}var s,o,r;ie.each(function(e,n){s=t(n),o=s.offset().left,e&&(r[1]=o),r=[o],i[e]=r}),r[1]=o+s.outerWidth(),Xe("allDaySlot")&&(s=ye,o=s.offset().top,e[0]=[o,o+s.outerHeight()]);for(var a=_e.offset().top,l=be.offset().top,c=l+be.outerHeight(),h=0;ze>h;h++)e.push([n(a+Ie*h),n(a+Ie*(h+1))])}),$e=new pe(He),Oe=new ge(function(t){return oe.eq(t)})}function ae(){function i(t,e){k(t);var i,n=t.length,r=[],l=[];for(i=0;n>i;i++)t[i].allDay?r.push(t[i]):l.push(t[i]);y("allDaySlot")&&(R(s(r),e),I()),a(o(l),e)}function n(){S(),N().empty(),F().empty()}function s(e){var i,n,s,o,r=D(T(e,t.map(e,x),v.visStart,v.visEnd)),a=r.length,l=[];for(i=0;a>i;i++)for(n=r[i],s=0;s<n.length;s++)o=n[s],o.row=0,o.level=i,l.push(o);return l}function o(e){var i,n,s,o,a,c,u=q(),f=O(),p=$(),m=h(d(v.visStart),f),g=t.map(e,r),y=[];for(i=0;u>i;i++){for(n=D(T(e,g,m,h(d(m),p-f))),le(n),s=0;s<n.length;s++)for(o=n[s],a=0;a<o.length;a++)c=o[a],c.col=i,c.level=s,y.push(c);l(m,1,!0)}return y}function r(t){return t.end?d(t.end):h(d(t.start),y("defaultEventMinutes"))}function a(i,n){var s,o,r,a,l,h,u,d,p,m,g,v,_,w,x,C,k,S,T,D,E,A,I=i.length,N="",H={},$={},O=F(),R=q();for((D=y("isRTL"))?(E=-1,A=R-1):(E=1,A=0),s=0;I>s;s++)o=i[s],r=o.event,a=W(o.start,o.start),l=W(o.start,o.end),h=o.col,u=o.level,d=o.forward||0,p=j(h*E+A),m=L(h*E+A)-p,m=Math.min(m-6,.95*m),g=u?m/(u+d+1):d?2*(m/(d+1)-6):m,v=p+m/(u+d+1)*u*E+(D?m-g:0),o.top=a,o.left=v,o.outerWidth=g,o.outerHeight=l-a,N+=c(r,o);for(O[0].innerHTML=N,_=O.children(),s=0;I>s;s++)o=i[s],r=o.event,w=t(_[s]),x=b("eventRender",r,r,w),x===!1?w.remove():(x&&x!==!0&&(w.remove(),w=t(x).css({position:"absolute",top:o.top,left:o.left}).appendTo(O)),o.element=w,r._id===n?f(r,w,o):w[0]._fci=s,G(r,w));for(M(O,i,f),s=0;I>s;s++)o=i[s],(w=o.element)&&(k=H[C=o.key=V(w[0])],o.vsides=k===e?H[C]=z(w,!0):k,k=$[C],o.hsides=k===e?$[C]=P(w,!0):k,S=w.find("div.fc-event-content"),S.length&&(o.contentTop=S[0].offsetTop));for(s=0;I>s;s++)o=i[s],(w=o.element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",T=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=T+"px",r=o.event,o.contentTop!==e&&T-o.contentTop<10&&(w.find("div.fc-event-time").text(oe(r.start,y("timeFormat"))+" - "+r.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",r,r,w))}function c(t,e){var i="<",n=t.url,s=K(t,y),o=s?" style='"+s+"'":"",r=["fc-event","fc-event-skin","fc-event-vert"];return _(t)&&r.push("fc-event-draggable"),e.isStart&&r.push("fc-corner-top"),e.isEnd&&r.push("fc-corner-bottom"),r=r.concat(t.className),t.source&&(r=r.concat(t.source.className||[])),i+=n?"a href='"+U(t.url)+"'":"div",i+=" class='"+r.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+s+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+o+">"+"<div class='fc-event-head fc-event-skin'"+o+">"+"<div class='fc-event-time'>"+U(re(t.start,t.end,y("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+U(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",e.isEnd&&w(t)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"
}function u(t,e,i){_(t)&&p(t,e,i.isStart),i.isEnd&&w(t)&&B(t,e,i),E(t,e)}function f(t,e,i){var n=e.find("div.fc-event-time");_(t)&&m(t,e,n),i.isEnd&&w(t)&&g(t,e,n),E(t,e)}function p(t,e,i){function n(){a||(e.width(s).height("").draggable("option","grid",null),a=!0)}var s,o,r,a=!0,c=y("isRTL")?-1:1,h=H(),u=Y(),f=X(),p=O();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(p,m){b("eventDragStart",e,t,p,m),Z(t,e),s=e.width(),h.start(function(s,h,p,m){ne(),s?(o=!1,r=m*c,s.row?i?a&&(e.width(u-10),A(e,f*Math.round((t.end?(t.end-t.start)/Te:y("defaultEventMinutes"))/y("slotMinutes"))),e.draggable("option","grid",[u,1]),a=!1):o=!0:(ie(l(d(t.start),r),l(x(t),r)),n()),o=o||a&&!r):(n(),o=!0),e.draggable("option","revert",o)},p,"drag")},stop:function(i,s){if(h.stop(),ne(),b("eventDragStop",e,t,i,s),o)n(),e.css("filter",""),J(t,e);else{var l=0;a||(l=Math.round((e.offset().top-Q().offset().top)/f)*y("slotMinutes")+p-(60*t.start.getHours()+t.start.getMinutes())),te(this,t,r,l,a,i,s)}}})}function m(t,e,i){function n(e){var n,s=h(d(t.start),e);t.end&&(n=h(d(t.end),e)),i.text(re(s,n,y("timeFormat")))}function s(){u&&(i.css("display",""),e.draggable("option","grid",[g,v]),u=!1)}var o,r,a,c,u=!1,f=y("isRTL")?-1:1,p=H(),m=q(),g=Y(),v=X();e.draggable({zIndex:9,scroll:!1,grid:[g,v],axis:1==m?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,h){b("eventDragStart",e,t,n,h),Z(t,e),o=e.position(),a=c=0,p.start(function(n,o,a,c){e.draggable("option","revert",!n),ne(),n&&(r=c*f,y("allDaySlot")&&!n.row?(u||(u=!0,i.hide(),e.draggable("option","grid",null)),ie(l(d(t.start),r),l(x(t),r))):s())},n,"drag")},drag:function(t,e){a=Math.round((e.position.top-o.top)/v)*y("slotMinutes"),a!=c&&(u||n(a),c=a)},stop:function(i,l){var c=p.stop();ne(),b("eventDragStop",e,t,i,l),c&&(r||a||u)?te(this,t,r,u?0:a,u,i,l):(s(),e.css("filter",""),e.css(o),n(0),J(t,e))}})}function g(t,e,i){var n,s,o=X();e.resizable({handles:{s:"div.ui-resizable-s"},grid:o,start:function(i,o){n=s=0,Z(t,e),e.css("z-index",9),b("eventResizeStart",this,t,i,o)},resize:function(r,a){n=Math.round((Math.max(o,e.height())-a.originalSize.height)/o),n!=s&&(i.text(re(t.start,n||t.end?h(C(t),y("slotMinutes")*n):null,y("timeFormat"))),s=n)},stop:function(i,s){b("eventResizeStop",this,t,i,s),n?ee(this,t,0,y("slotMinutes")*n,i,s):(e.css("z-index",8),J(t,e))}})}var v=this;v.renderEvents=i,v.compileDaySegs=s,v.clearEvents=n,v.slotSegHtml=c,v.bindDaySeg=u,he.call(v);var y=v.opt,b=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,C=v.eventEnd,k=v.reportEvents,S=v.reportEventClear,E=v.eventElementHandlers,I=v.setHeight,N=v.getDaySegmentContainer,F=v.getSlotSegmentContainer,H=v.getHoverListener,$=v.getMaxMinute,O=v.getMinMinute,W=v.timePosition,j=v.colContentLeft,L=v.colContentRight,R=v.renderDaySegs,B=v.resizableDayEvent,q=v.getColCnt,Y=v.getColWidth,X=v.getSlotHeight,Q=v.getBodyContent,G=v.reportEventElement,J=v.showEvents,Z=v.hideEvents,te=v.eventDrop,ee=v.eventResize,ie=v.renderDayOverlay,ne=v.clearOverlays,se=v.calendar,oe=se.formatDate,re=se.formatDates}function le(t){var e,i,n,s,o,r;for(e=t.length-1;e>0;e--)for(s=t[e],i=0;i<s.length;i++)for(o=s[i],n=0;n<t[e-1].length;n++)r=t[e-1][n],S(o,r)&&(r.forward=Math.max(r.forward||0,(o.forward||0)+1))}function ce(t,i,n){function s(t,e){var i=P[t];return"object"==typeof i?q(i,e||n):i}function o(t,e){return i.trigger.apply(i,[t,e||k].concat(Array.prototype.slice.call(arguments,2),[k]))}function r(t){return c(t)&&!s("disableDragging")}function a(t){return c(t)&&!s("disableResizing")}function c(t){return J(t.editable,(t.source||{}).editable,s("editable"))}function u(t){M={};var e,i,n=t.length;for(e=0;n>e;e++)i=t[e],M[i._id]?M[i._id].push(i):M[i._id]=[i]}function f(t){return t.end?d(t.end):S(t)}function p(t,e){E.push(e),A[t._id]?A[t._id].push(e):A[t._id]=[e]}function m(){E=[],A={}}function g(t,e){e.click(function(i){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:o("eventClick",this,t,i)}).hover(function(e){o("eventMouseover",this,t,e)},function(e){o("eventMouseout",this,t,e)})}function v(t,e){b(t,e,"show")}function y(t,e){b(t,e,"hide")}function b(t,e,i){var n,s=A[t._id],o=s.length;for(n=0;o>n;n++)e&&s[n][0]==e[0]||s[n][i]()}function _(t,e,i,n,s,r,a){var l=e.allDay,c=e._id;x(M[c],i,n,s),o("eventDrop",t,e,i,n,s,function(){x(M[c],-i,-n,l),D(c)},r,a),D(c)}function w(t,e,i,n,s,r){var a=e._id;C(M[a],i,n),o("eventResize",t,e,i,n,function(){C(M[a],-i,-n),D(a)},s,r),D(a)}function x(t,i,n,s){n=n||0;for(var o,r=t.length,a=0;r>a;a++)o=t[a],s!==e&&(o.allDay=s),h(l(o.start,i,!0),n),o.end&&(o.end=h(l(o.end,i,!0),n)),T(o,P)}function C(t,e,i){i=i||0;for(var n,s=t.length,o=0;s>o;o++)n=t[o],n.end=h(l(f(n),e,!0),i),T(n,P)}var k=this;k.element=t,k.calendar=i,k.name=n,k.opt=s,k.trigger=o,k.isEventDraggable=r,k.isEventResizable=a,k.reportEvents=u,k.eventEnd=f,k.reportEventElement=p,k.reportEventClear=m,k.eventElementHandlers=g,k.showEvents=v,k.hideEvents=y,k.eventDrop=_,k.eventResize=w;var S=k.defaultEventEnd,T=i.normalizeEvent,D=i.reportEventChange,M={},E=[],A={},P=i.options}function he(){function i(t,e){var i,n,l,d,g,v,y,b,_=W(),w=D(),x=E(),C=0,k=t.length;for(_[0].innerHTML=s(t),o(t,_.children()),r(t),a(t,_,e),c(t),h(t),u(t),i=f(),n=0;w>n;n++){for(l=0,d=[],g=0;x>g;g++)d[g]=0;for(;k>C&&(v=t[C]).row==n;){for(y=R(d.slice(v.startCol,v.endCol)),v.top=y,y+=v.outerHeight,b=v.startCol;b<v.endCol;b++)d[b]=y;C++}i[n].height(R(d))}m(t,p(i))}function n(e,i,n){var r,a,l,d=t("<div/>"),g=W(),v=e.length;for(d[0].innerHTML=s(e),r=d.children(),g.append(r),o(e,r),c(e),h(e),u(e),m(e,p(f())),r=[],a=0;v>a;a++)l=e[a].element,l&&(e[a].row===i&&l.css("top",n),r.push(l[0]));return t(r)}function s(t){var e,i,n,s,o,r,a,l,c,h,u=y("isRTL"),d=t.length,f=I(),p=f.left,m=f.right,g="";for(e=0;d>e;e++)i=t[e],n=i.event,o=["fc-event","fc-event-skin","fc-event-hori"],_(n)&&o.push("fc-event-draggable"),u?(i.isStart&&o.push("fc-corner-right"),i.isEnd&&o.push("fc-corner-left"),r=z(i.end.getDay()-1),a=z(i.start.getDay()),l=i.isEnd?N(r):p,c=i.isStart?F(a):m):(i.isStart&&o.push("fc-corner-left"),i.isEnd&&o.push("fc-corner-right"),r=z(i.start.getDay()),a=z(i.end.getDay()-1),l=i.isStart?N(r):p,c=i.isEnd?F(a):m),o=o.concat(n.className),n.source&&(o=o.concat(n.source.className||[])),s=n.url,h=K(n,y),g+=s?"<a href='"+U(s)+"'":"<div",g+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+h+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(h?" style='"+h+"'":"")+">",!n.allDay&&i.isStart&&(g+="<span class='fc-event-time'>"+U(L(n.start,n.end,y("timeFormat")))+"</span>"),g+="<span class='fc-event-title'>"+U(n.title)+"</span>"+"</div>",i.isEnd&&w(n)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(u?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),g+="</"+(s?"a":"div")+">",i.left=l,i.outerWidth=c-l,i.startCol=r,i.endCol=a+1;return g}function o(e,i){var n,s,o,r,a,l=e.length;for(n=0;l>n;n++)s=e[n],o=s.event,r=t(i[n]),a=b("eventRender",o,o,r),a===!1?r.remove():(a&&a!==!0&&(a=t(a).css({position:"absolute",left:s.left}),r.replaceWith(a),r=a),s.element=r)}function r(t){var e,i,n,s=t.length;for(e=0;s>e;e++)i=t[e],n=i.element,n&&C(i.event,n)}function a(t,e,i){var n,s,o,r,a=t.length;for(n=0;a>n;n++)s=t[n],o=s.element,o&&(r=s.event,r._id===i?j(r,o,s):o[0]._fci=n);M(e,t,j)}function c(t){var i,n,s,o,r,a=t.length,l={};for(i=0;a>i;i++)n=t[i],s=n.element,s&&(o=n.key=V(s[0]),r=l[o],r===e&&(r=l[o]=P(s,!0)),n.hsides=r)}function h(t){var e,i,n,s=t.length;for(e=0;s>e;e++)i=t[e],n=i.element,n&&(n[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px")}function u(t){var i,n,s,o,r,a=t.length,l={};for(i=0;a>i;i++)n=t[i],s=n.element,s&&(o=n.key,r=l[o],r===e&&(r=l[o]=$(s)),n.outerHeight=s[0].offsetHeight+r)}function f(){var t,e=D(),i=[];for(t=0;e>t;t++)i[t]=A(t).find("td:first div.fc-day-content > div");return i}function p(t){var e,i=t.length,n=[];for(e=0;i>e;e++)n[e]=t[e][0].offsetTop;return n}function m(t,e){var i,n,s,o,r=t.length;for(i=0;r>i;i++)n=t[i],s=n.element,s&&(s[0].style.top=e[n.row]+(n.top||0)+"px",o=n.event,b("eventAfterRender",o,o,s))}function g(e,i,s){var o=y("isRTL"),r=o?"w":"e",a=i.find("div.ui-resizable-"+r),c=!1;Y(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){c&&(t.preventDefault(),t.stopImmediatePropagation())}),a.mousedown(function(a){function h(i){b("eventResizeStop",this,e,i),t("body").css("cursor",""),p.stop(),q(),u&&T(this,e,u,0,i),setTimeout(function(){c=!1},0)}if(1==a.which){c=!0;var u,f,p=v.getHoverListener(),m=D(),g=E(),y=o?-1:1,_=o?g-1:0,w=i.css("top"),C=t.extend({},e),M=H(e.start);X(),t("body").css("cursor",r+"-resize").one("mouseup",h),b("eventResizeStart",this,e,a),p.start(function(t,i){if(t){var a=Math.max(M.row,t.row),c=t.col;1==m&&(a=0),a==M.row&&(c=o?Math.min(M.col,c):Math.max(M.col,c)),u=7*a+c*y+_-(7*i.row+i.col*y+_);var h=l(x(e),u,!0);if(u){C.end=h;var p=f;f=n(O([C]),s.row,w),f.find("*").css("cursor",r+"-resize"),p&&p.remove(),S(e)}else f&&(k(e),f.remove(),f=null);q(),B(e.start,l(d(h),1))}},a)}})}var v=this;v.renderDaySegs=i,v.resizableDayEvent=g;var y=v.opt,b=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,x=v.eventEnd,C=v.reportEventElement,k=v.showEvents,S=v.hideEvents,T=v.eventResize,D=v.getRowCnt,E=v.getColCnt;v.getColWidth;var A=v.allDayRow,I=v.allDayBounds,N=v.colContentLeft,F=v.colContentRight,z=v.dayOfWeekCol,H=v.dateCell,O=v.compileDaySegs,W=v.getDaySegmentContainer,j=v.bindDaySeg,L=v.calendar.formatDates,B=v.renderDayOverlay,q=v.clearOverlays,X=v.clearSelection}function ue(){function e(t,e,s){i(),e||(e=l(t,s)),c(t,e,s),n(t,e,s)}function i(t){u&&(u=!1,h(),a("unselect",null,t))}function n(t,e,i,n){u=!0,a("select",null,t,e,i,n)}function s(e){var s=o.cellDate,a=o.cellIsAllDay,l=o.getHoverListener(),u=o.reportDayClick;if(1==e.which&&r("selectable")){i(e);var d;l.start(function(t,e){h(),t&&a(t)?(d=[s(e),s(t)].sort(L),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&u(d[0],!0,t),n(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=i,o.reportSelection=n,o.daySelectionMousedown=s;var r=o.opt,a=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,h=o.clearSelection,u=!1;r("selectable")&&r("unselectAuto")&&t(document).mousedown(function(e){var n=r("unselectCancel");n&&t(e.target).parents(n).length||i(e)})}function de(){function e(e,i){var n=o.shift();return n||(n=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),s.push(n.css(e).show()),n}function i(){for(var t;t=s.shift();)o.push(t.hide().unbind())}var n=this;n.renderOverlay=e,n.clearOverlays=i;var s=[],o=[]}function fe(t){var e,i,n=this;n.build=function(){e=[],i=[],t(e,i)},n.cell=function(t,n){var s,o=e.length,r=i.length,a=-1,l=-1;for(s=0;o>s;s++)if(n>=e[s][0]&&n<e[s][1]){a=s;break}for(s=0;r>s;s++)if(t>=i[s][0]&&t<i[s][1]){l=s;break}return a>=0&&l>=0?{row:a,col:l}:null},n.rect=function(t,n,s,o,r){var a=r.offset();return{top:e[t][0]-a.top,left:i[n][0]-a.left,width:i[o][1]-i[n][0],height:e[s][1]-e[t][0]}}}function pe(e){function i(t){me(t);var i=e.cell(t.pageX,t.pageY);(!i!=!r||i&&(i.row!=r.row||i.col!=r.col))&&(i?(o||(o=i),s(i,o,i.row-o.row,i.col-o.col)):s(i,o),r=i)}var n,s,o,r,a=this;a.start=function(a,l,c){s=a,o=r=null,e.build(),i(l),n=c||"mousemove",t(document).bind(n,i)},a.stop=function(){return t(document).unbind(n,i),r}}function me(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ge(t){function i(e){return s[e]=s[e]||t(e)}var n=this,s={},o={},r={};n.left=function(t){return o[t]=o[t]===e?i(t).position().left:o[t]},n.right=function(t){return r[t]=r[t]===e?n.left(t)+i(t).width():r[t]},n.clear=function(){s={},o={},r={}}}var ve={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},ye={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},be=t.fullCalendar={version:"1.5.4"},_e=be.views={};t.fn.fullCalendar=function(i){if("string"==typeof i){var s,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[i])){var r=n[i].apply(n,o);s===e&&(s=r),"destroy"==i&&t.removeData(this,"fullCalendar")}}),s!==e?s:this}var r=i.eventSources||[];return delete i.eventSources,i.events&&(r.push(i.events),delete i.events),i=t.extend(!0,{},ve,i.isRTL||i.isRTL===e&&ve.isRTL?ye:{},i),this.each(function(e,s){var o=t(s),a=new n(o,i,r);o.data("fullCalendar",a),a.render()}),this},be.sourceNormalizers=[],be.sourceFetchers=[];var we={dataType:"json",cache:!1},xe=1;be.addDays=l,be.cloneDate=d,be.parseDate=v,be.parseISO8601=y,be.parseTime=b,be.formatDate=_,be.formatDates=w;var Ce=["sun","mon","tue","wed","thu","fri","sat"],ke=864e5,Se=36e5,Te=6e4,De={s:function(t){return t.getSeconds()},ss:function(t){return B(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return B(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return B(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return B(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return B(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return B(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return _(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"}};be.applyAll=G,_e.month=Z,_e.basicWeek=te,_e.basicDay=ee,i({weekMode:"fixed"}),_e.agendaWeek=se,_e.agendaDay=oe,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);