<!-- Main Content -->

 <section id="promo" class="section alt">
   <div class="container-fluid">
     <div class="row-fluid">
       <div class="span10 offset1">
         <div class="row-fluid">
           <div class="span5">
             <div class="row-fluid">
               <div class="span12 centered-text">
                 <h3><span><%= @user.name.split[0..0].join(" ") %></span></h3>
                 <% if @user.location.present? %>
                  <p><span data-toggle="modal" data-target="#location-modal" data-keyboard="true" class="location-modal-button">
                     <%= @user.location %>
                  </span></p> 
                  <!-- Location Modal -->
                    <div id="location-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                      <div class="modal-header left-aligned">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h3><span><%= @user.name.split[0..0].join(" ") %></span></h3>
                       <% if @user.location.present? %><p><span><%= @user.location %></span></p> <%end %>
                      </div>
                      <div class="modal-body">
                        <img src="http://maps.googleapis.com/maps/api/staticmap?center=<%= @user.location %>&zoom=11&size=400x300&sensor=false">
                      </div>
                    </div>
                 <!-- End Location Modal --> 
                 <%end %>
                 
                 <a href="#">
                 <div class="profile-pic">
                   <%= image_tag @user.photos.first.image, :"data-toggle" => "modal", :"data-target" => "#photos-modal", :"data-keyboard"=>"true"%>
                 </div>
                 <!-- Photos Modal -->
                  <div id="photos-modal" class="modal hide fade left-aligned photos-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-body">
                      <div id="photoCarousel" class="carousel slide" data-interval="false">
                        <div class="carousel-inner">
                          <div class="active item"><%= image_tag @user.photos.first.image %></div>
                          <% @user.photos.drop(1).each_with_index do |photo, counter| %>
                            <div class="item"><%= image_tag photo.image %></div> 
                          <% end %>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#photoCarousel" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#photoCarousel" data-slide="next">&rsaquo;</a>
                      </div>
                    </div>
                  </div>
                 <!-- End Photos Modal --> 
               </a>
               </div>
               <div class="clearfix"></div>
               <div class="row-fluid pictures-contact-buttons">
                 <div class="span4 offset1 pictures-button">
                   <a href = "#" data-toggle="modal" data-target="#photos-modal" data-keyboard="true" class="btn">Pictures</a>
                 </div>
                 <div class="span4 offset2 contact-button">
                   <a data-toggle="modal" data-target="#message-modal" 
                    data-remote ="<%= new_conversation_path(:recipient => @user.email, :modal => true) %>"
                    data-keyboard="true" class="btn">Contact</a>
                 </div>
                 <!-- About Me Modal -->
                  <div id="message-modal" class="modal hide fade left-aligned" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                      <h3><span>Message <%= @user.name.split[0..0].join(" ") %></span></h3>
                    </div>
                    <div class="modal-body">
                    </div>
                  </div>
                 <!-- End About Me Modal --> 
               </div>
             </div>
           </div>
           <div class="span7">
             <div class="row-fluid about-me">
               <div class="page-header">
                 <h1>
                     About Me
                 </h1>
               </div>
               <p>
                 <%= shorten :text => @user.about, :length => 800, :partial => "more_bio" %>
               </p>
             </div>
             <!-- About Me Modal -->
              <div id="about-me-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h3><span><%= @user.name.split[0..0].join(" ") %></span></h3>
                 <% if @user.location.present? %><p><span><%= @user.location %></span></p> <%end %>
                </div>
                <div class="modal-body">
                  <p>
                 <%= simple_format(@user.about) %>
                  </p>
                </div>
              </div>
             <!-- End About Me Modal --> 
             <div class="row-fluid bio-more">
               <a data-toggle="modal" data-target="#about-me-modal" data-keyboard="true" class="hidden btn btn-link">more</a>
             </div>
             <div class="row-fluid roles">
               <% if @user.talents.present? then %>
                <%= render :partial => 'roles' %>
               <% end %>
               
             </div>
           </div>
          <div class="clearfix"></div>
          <div class="row-fluid projects-characteristics">
					<% if @user.projects.present? then %>
						<%= render :partial => 'current_projects' %>
					<% end %>
					</div>
         </div>
       </div>
     </div>
   </div>
 </section>

<% comment = "Here we're dynamically displaying videos--only those that the user has linked to.
             We need to choose how it will be offset depending on how many videos
             are being displayed.
"%>

<% if @real_videos.length > 0 %>
 <section class="section">
   <div class="container-fluid">
     <div class="row-fluid">
       <div class="span12">
         <div class="row-fluid">
           <div class="page-header">
             <h1>
               Video Portfolio <small>A sample of <%= @user.name.split[0..0].join(" ").possessive %> work</small> 
             </h1>
           </div>
           <ul class="thumbnails thumbnail-list">
           <% @real_videos.each_with_index do |video, counter| %>
            <% if counter == 0 %>
             <li class="span4 offset<%= (3 - @real_videos.length) * 2 %>">
            <% else %>
             <li class="span4">
            <% end %>
               <div class="row-fluid">
                 <h3><%= video.title %></h3>
               </div>
							 <a data-toggle="lightbox" href="#video<%= counter %>">
                 <figure class="thumbnail-figure">
                   <%= image_tag(video.thumbnail_large, :width => '100%') %>
									 <i class="icon-play-circle"></i>    
                 </figure>
							</a>
							<div class="lightbox fade" id="video<%= counter %>" style="display: none;">
								<div class='lightbox-content'>
									<h3><%= video.title %></h3>
									<iframe width="560" height="315" src=<%= video.embed_url %> frameborder="0" allowfullscreen></iframe>
								</div>
							</div>
              <div class="row-fluid video-more-button" data-video="<%= counter %>">
                <span>
                <% if video.user_description.present? %> 
                  <%= shorten :text => video.user_description, :length => 140, :partial => "more_video" %>
                <%end %>
                </span>
             </li>
             <!-- Video Description Modal -->
              <div id="video-modal-<%= counter %>" data-video="<%= counter %>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h3><span><%= video.title %></span></h3>
                </div>
                <div class="modal-body">
                  <p>
                 <%= simple_format(video.user_description) %>
                  </p>
                </div>
              </div>
              <!-- End Video Description Modal --> 
             <% end %>
           </ul>
         </div>  
       </div>
     </div>  
   </div>
 </section>
<% end %>
 </div>